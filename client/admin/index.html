<!DOCTYPE html>
<html>
    <head>
        <title>TaxiGO 管理平台</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="build/ng-admin.min.css"/>
        <style type="text/css">
            /*map, div[map] {display:block; height: 100% !important}
            .fill {height:100% !important}*/
          #map {
            height: 100%;
          }
        </style>
    </head>
    <body ng-app="myApp">
        <div ui-view></div>
        <script type="text/javascript">
        /* global window */
        var userToken = window.localStorage.getItem('accessTokenId');
        if (!userToken) {
            window.location.href = './login.html';
        }        // function logout() {

        //     window.localStorage.removeItem('accessTokenId');
        //     window.location.href = './login.html';
        // }
        </script>
        <!-- <script type="text/javascript" src="data.js" charset="utf-8"></script>-->
            <!--<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.17/angular-resource.min.js"></script>-->
<!--<script src="/bower_components/angular/angular.js"></script>
<script src="/bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>
<script src="/bower_components/angular-bootstrap/ui-bootstrap.min.js"></script>
<script src="/bower_components/angular-resource/angular-resource.min.js"></script>
<script src="/bower_components/angular-ui-codemirror/ui-codemirror.min.js"></script>
<script src="/bower_components/angular-ui-router/release/angular-ui-router.min.js"></script>
<script src="/bower_components/angular-numeraljs/dist/angular-numeraljs.min.js"></script>
<script src="/bower_components/humane-js/humane.js"></script>
<script src="/bower_components/inflection/inflection.min.js"></script>
<script src="/bower_components/lodash/lodash.min.js"></script>
<script src="/bower_components/ng-file-upload/ng-file-upload-all.min.js"></script>
<script src="/bower_components/ngInflection/dist/ngInflection.js"></script>
<script src="/bower_components/ngprogress/build/ngprogress.min.js"></script>
<script src="/bower_components/restangular/dist/restangular.min.js"></script>
<script src='/bower_components/textAngular/dist/textAngular-rangy.min.js'></script>
<script src='/bower_components/textAngular/dist/textAngular-sanitize.min.js'></script>
<script src="/bower_components/textAngular/dist/textAngular.min.js"></script>
<script src="/bower_components/papaparse/papaparse.min.js"></script>
<script src="/bower_components/numeral/min/numeral.min.js"></script>
<script src="/bower_components/codemirror/lib/codemirror.js"></script>
<script src="/bower_components/codemirror/addon/edit/closebrackets.js"></script>
<script src="/bower_components/codemirror/addon/lint/lint.js"></script>
<script src="/bower_components/jsonlint/lib/jsonlint.js"></script>
<script src="/bower_components/codemirror/addon/lint/json-lint.js"></script>
<script src="/bower_components/codemirror/addon/selection/active-line.js"></script>
<script src="/bower_components/codemirror/mode/javascript/javascript.js"></script>
<script src="/bower_components/ui-select/dist/select.min.js"></script>-->
<script src="/bower_components/jquery/dist/jquery.min.js"></script>
<script type="text/javascript">
        $(document).ready(function (){
        if (window.localStorage.getItem('accessTokenId')) {
            $.ajax({
                url: location.protocol+'//'+location.host+'/api/taxiGoUsers/me',
                type: 'get',
                data: {},
                headers: {
                    'Authorization': window.localStorage.getItem('accessTokenId')
                    // Header_Name_One: 'Header Value One',   //If your header name has spaces or any other char not appropriate
                    // "Header Name Two": 'Header Value Two'  //for object property name, use quoted notation shown in second
                },
                dataType: 'json',
                success: function (data) {
                    if (data.realm === 'admin'){
                    } else {

                        window.localStorage.removeItem('accessTokenId');
                        window.localStorage.removeItem('currentUserId');
                        window.location.href = "./login.html";
                    }
                    // console.info(data);
                },
                error: function (data){
                    window.localStorage.removeItem('accessTokenId');
                    window.localStorage.removeItem('currentUserId');
                    window.location.href = "./login.html";
                }
            });
        };
    });
</script>
<script src="/bower_components/ng-admin/build/ng-admin.min.js"></script>
<script src="http://maps.google.com/maps/api/js"></script>
<script src="/bower_components/ngmap/build/scripts/ng-map.min.js"></script>
<script src="/bower_components/angular-resource/angular-resource.min.js"></script>
<script src="/bower_components/angular-resource/angular-resource.min.js"></script>
<script src="/bower_components/angular-smart-table/dist/smart-table.min.js"></script>
<script src="../js/lb-services.js"></script>
        <script src="js/fullscreen.js"></script>
        <script src="js/main.js" ></script>
        <script src="js/monitorController.js"></script>
        <script type="text/javascript">
        /* jshint ignore:start */
            function toggleFullScreen(){
                if (screenfull.enabled) {
                    if(document.getElementById('main-monitor')){ //jshint:ignoreline
                        screenfull.request(document.getElementById('page-wrapper'));
                    }else{
                        screenfull.request();    
                    }
                    
                }
            }
        /* jshint ignore:end */    
        </script>
        <script>
          // (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          // (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          // m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          // })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
          // ga('create', 'UA-46201426-1', 'auto');
          // ga('send', 'pageview');
        </script>
    </body>
</html>
